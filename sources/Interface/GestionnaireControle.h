#include <map>
#include <iostream>
#include <fstream>
enum Action {
	AVANCER,RECULER,DROITE,GAUCHE,SAUTER,ACCROUPIR,COURIR,TIRER,UTILISER,INVENTAIRE
};
class GestionnaireControle: public Singleton<GestionnaireControle> {
private:
	std::map<int, int> Controles;

public:
	void lireControle(char* Emplacement) {
		char Evenement[15];
		char Touche[4];
		std::ifstream FichierDeLecture(Emplacement);
		if (FichierDeLecture.is_open()) {
			while (!FichierDeLecture.eof()) {
				FichierDeLecture >> Evenement;
				FichierDeLecture >> Touche;
				int EvenementEnInt = std::atoi(Evenement);
				int ToucheEnInt = std::atoi(Touche);

				switch (EvenementEnInt) {
				case 0:
					Controles[AVANCER] = ToucheEnInt;
					break;
				case 1:
					Controles[RECULER] = ToucheEnInt;
					break;
				case 2:
					Controles[DROITE] = ToucheEnInt;
					break;
				case 3:
					Controles[GAUCHE] = ToucheEnInt;
					break;
				case 4:
					Controles[SAUTER] = ToucheEnInt;
					break;
				case 5:
					Controles[ACCROUPIR] = ToucheEnInt;
					break;
				case 6:
					Controles[COURIR] = ToucheEnInt;
					break;
				case 7:
					Controles[TIRER] = ToucheEnInt;
					break;
				case 8:
					Controles[UTILISER] = ToucheEnInt;
					break;
				case 9:
					Controles[INVENTAIRE] = ToucheEnInt;
					break;
				}
				

					
			}

		}
	}
	bool definirControle(Action Evenement, int Controle) {
		
		for (std::map<int, int>::iterator it = Controles.begin(); it != Controles.end(); ++it) {
			if (it->second == Controle)
				return false;
			
		}
		
		Controles[Evenement] = Controle;
		return true;
		
		
	}

	void sauvegarderControle(char* Emplacement) {
		std::ofstream EcritureFichier(Emplacement);

		EcritureFichier << "0" << std::endl;
		EcritureFichier << Controles[AVANCER] << std::endl;

		EcritureFichier << "1" << std::endl;
		EcritureFichier << Controles[RECULER] << std::endl;

		EcritureFichier << "2" << std::endl;
		EcritureFichier << Controles[DROITE] << std::endl;

		EcritureFichier << "3" << std::endl;
		EcritureFichier << Controles[GAUCHE] << std::endl;

		EcritureFichier << "4" << std::endl;
		EcritureFichier << Controles[SAUTER] << std::endl;

		EcritureFichier << "5" << std::endl;
		EcritureFichier << Controles[ACCROUPIR] << std::endl;

		EcritureFichier << "6" << std::endl;
		EcritureFichier << Controles[COURIR] << std::endl;

		EcritureFichier << "7" << std::endl;
		EcritureFichier << Controles[TIRER] << std::endl;

		EcritureFichier << "8" << std::endl;
		EcritureFichier << Controles[UTILISER] << std::endl;

		EcritureFichier << "9" << std::endl;
		EcritureFichier << Controles[INVENTAIRE];


	}

	std::map<int,int> obtenirControles(void) {
		return Controles;
	}



};